(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["belgium"],{"3d40":function(t,e,n){"use strict";n("d93f")},"5c0d":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h-100 v-100"},[n("BelgiumMapComponent",{attrs:{communes:t.communes,"last-update":t.lastUpdate,options:t.options},model:{value:t.selectedOption,callback:function(e){t.selectedOption=e},expression:"selectedOption"}})],1)},i=[],s=n("dc3e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h-100"},[n("div",{ref:"map",staticClass:"map h-100"}),n("div",{staticClass:"overlay text-center"},[n("div",{staticClass:"small"},[n("b-form-select",{staticClass:"mt-3",attrs:{options:t.options,size:"sm"},model:{value:t.selectedOption,callback:function(e){t.selectedOption=e},expression:"selectedOption"}})],1),n("div",{staticClass:"small"},[t._v("Incidence (cases/100k inhab.)")]),n("BelgiumMapLegendComponent",{attrs:{height:40,width:220,scale:t.scaleColor}}),n("div",{staticClass:"small text-muted"},[n("small",[t._v("Last update: "),n("a",{attrs:{href:"https://github.com/Thib-G/coronavirus/tree/master/data"}},[t._v(t._s(t.dateFormatISO9075(t.lastUpdate)))])])])],1)])},c=[],r=n("2909"),u=(n("a9e3"),n("d81d"),n("4de4"),n("99af"),n("b0c0"),n("b680"),n("e11e")),l=n.n(u),d=n("9d3f"),m=n.n(d),p=n("5d7f"),h=n("0986"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:t.width,height:t.height}},[n("defs",[n("linearGradient",{attrs:{id:"legend-gradient"}},t._l(t.ticks,(function(t){return n("stop",{key:t.key,attrs:{offset:t.offset,"stop-color":t.stopColor}})})),1)],1),n("g",{attrs:{transform:"translate("+t.margin.left+","+t.margin.top+")"}},[n("rect",{staticClass:"legend",attrs:{x:"0",y:"0",width:t.insideWidth,height:t.insideHeight}})]),n("g",{ref:"xAxis",staticClass:"x-axis",attrs:{transform:"translate("+t.margin.left+","+(t.margin.top+t.insideHeight)+")"}})])},g=[],v={props:{width:{type:Number,required:!0},height:{type:Number,required:!0},scale:{type:Function,required:!0}},data:function(){return{margin:{top:5,right:5,bottom:15,left:5}}},mounted:function(){this.updateAxis()},watch:{scale:function(){this.updateAxis()}},computed:{ticks:function(){var t=this;return this.scale.ticks().map((function(e,n,a){return{key:"".concat(e,"-").concat(n),offset:"".concat(100*n/a.length,"%"),stopColor:t.scale(e)}}))},axisScale:function(){return p["a"].scaleLinear().domain(this.scale.domain()).range([0,this.insideWidth])},insideWidth:function(){return this.width-this.margin.left-this.margin.right},insideHeight:function(){return this.height-this.margin.top-this.margin.bottom}},methods:{updateAxis:function(){p["a"].select(this.$refs.xAxis).call(p["a"].axisBottom(this.axisScale).ticks(this.insideWidth/50).tickSize(-this.insideHeight))}}},b=v,y=(n("b8a1"),n("2877")),x=Object(y["a"])(b,f,g,!1,null,"965c6ac0",null),C=x.exports,w={props:{communes:{type:Object,required:!0},lastUpdate:{type:Date,required:!0},options:{type:Array,required:!0},value:{type:Number,required:!0}},data:function(){return{dateFormatISO9075:m.a,zoom:8,center:l.a.latLng([50.465841,4.857634]),basemaps:Object(h["a"])('&copy; <a href="https://epistat.wiv-isp.be/covid/">https://epistat.wiv-isp.be/covid/</a> | '),communesFg:l.a.featureGroup()}},mounted:function(){this.initMap(),this.updateCommunes()},watch:{communes:function(){this.updateCommunes()}},computed:{selectedOption:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},scaleColor:function(){var t=this,e=this.communes.features.filter((function(t){return"Herstappe"!==t.properties.NameDut})).map((function(e){return t.getIncidence(e).incidence})),n=Math.min.apply(Math,Object(r["a"])(e)),a=Math.max.apply(Math,Object(r["a"])(e));return p["a"].scaleSequential(p["a"].interpolateGreens).domain([n,a])}},methods:{initMap:function(){this.map=l.a.map(this.$refs.map,{center:this.center,zoom:this.zoom}),this.basemaps.light.addTo(this.map),l.a.control.layers(this.basemaps).addTo(this.map),this.communesFg.addTo(this.map)},updateCommunes:function(){var t=this;this.$nextTick().then((function(){t.communesFg.clearLayers();var e=l.a.geoJson(t.communes,{style:function(){return{weight:2,color:"grey",opacity:.8,fillOpacity:.6}},onEachFeature:function(e,n){var a=t.getIncidence(e);n.setStyle({fillColor:t.scaleColor(a.incidence)}),n.bindTooltip("<b>".concat(a.name,":</b>\n              ").concat(a.cases," cases<br />\n              Population: ").concat(a.pop,"<br />\n              Incidence: ").concat("<5"===a.cases?"<":"").concat(a.incidence.toFixed(1)," cases/100k inhab.")),n.on({mouseover:function(){n.bringToFront(),n.setStyle({color:"black"})},mouseout:function(){n.setStyle({color:"grey"})}})}});t.communesFg.addLayer(e)}))},getIncidence:function(t){var e=t.properties,n="".concat(e.NameDut||""," ").concat(e.NameFre||""," ").concat(e.NameGer||""),a=e.cases?e.cases.CASES:"?",i=e.population?e.population.POP:0,s=i>0&&"?"!==a?("<5"===a?5:+a)/i*1e5:0;return{name:n,cases:a,pop:i,incidence:s}}},components:{BelgiumMapLegendComponent:C}},O=w,S=(n("3d40"),Object(y["a"])(O,o,c,!1,null,"d175fedc",null)),k=S.exports,_={data:function(){var t=[{text:"Total cumulative",value:-1},{text:"Last 7 days cumulative",value:7},{text:"Last 14 days cumulative",value:14}];return{appService:s["a"],communes:{type:"FeatureCollection",features:[]},lastUpdate:new Date(1970,0,1),options:t,selectedOption:t[0].value}},created:function(){this.getCommunes(this.selectedOption),this.getLastUpdate()},watch:{selectedOption:function(t){this.getCommunes(t)}},methods:{getCommunes:function(t){var e=this;this.appService.getBelgiumCommunes(t).then((function(t){e.communes=t}))},getLastUpdate:function(){var t=this;this.appService.getBelgiumCommunesLastUpdate().then((function(e){t.lastUpdate=e}))}},components:{BelgiumMapComponent:k}},M=_,F=Object(y["a"])(M,a,i,!1,null,null,null);e["default"]=F.exports},"91bf":function(t,e,n){},"9d3f":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var a=o(n("d8e8")),i=o(n("2d6b")),s=o(n("6409"));function o(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=(0,a.default)(t);if(!(0,i.default)(n))throw new RangeError("Invalid time value");var o=e||{},c=null==o.format?"extended":String(o.format),r=null==o.representation?"complete":String(o.representation);if("extended"!==c&&"basic"!==c)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==r&&"time"!==r&&"complete"!==r)throw new RangeError("representation must be 'date', 'time', or 'complete'");var u="",l="extended"===c?"-":"",d="extended"===c?":":"";if("time"!==r){var m=(0,s.default)(n.getDate(),2),p=(0,s.default)(n.getMonth()+1,2),h=(0,s.default)(n.getFullYear(),4);u="".concat(h).concat(l).concat(p).concat(l).concat(m)}if("date"!==r){var f=(0,s.default)(n.getHours(),2),g=(0,s.default)(n.getMinutes(),2),v=(0,s.default)(n.getSeconds(),2),b=""===u?"":" ";u="".concat(u).concat(b).concat(f).concat(d).concat(g).concat(d).concat(v)}return u}t.exports=e.default},b8a1:function(t,e,n){"use strict";n("91bf")},d93f:function(t,e,n){}}]);
//# sourceMappingURL=belgium.f4991c58.js.map